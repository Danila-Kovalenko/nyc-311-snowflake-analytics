# Power BI

This folder contains the Power BI reports (`.pbix`) and their screenshots (`.png`).
The reports connect to Snowflake and visualize the curated PRES layer.

Back to root: [../README.md](../README.md)

---

## Data model (Snowflake)

Main Power BI view:
- `PRES.VW_PBI_DAILY_BOROUGH_METRICS`

Created by:
- [`../sql/04_pres_metrics_and_pbi_views.sql`](../sql/04_pres_metrics_and_pbi_views.sql)

This view contains:
- `METRIC_DATE`
- `BOROUGH` (cleaned to remove prefixes like `01 BROOKLYN`)
- `COMPLAINT_TYPE`
- `REQUESTS_COUNT`, `CLOSED_COUNT`, `AVG_RESPONSE_HOURS`
- `BOROUGH_LOCATION` (text location string used for mapping)

---

## Files

### Map report
- **[`map.pbix`](./map.pbix)** — map visualization by borough  
- Screenshot: **[`map.png`](./map.png)**

Typical fields:
- Location: `BOROUGH_LOCATION`
- Size: `REQUESTS_COUNT`
- Color/Legend: `BOROUGH`

### Line chart (actuals)
- **[`line_diagram.pbix`](./line_diagram.pbix)** — daily requests line chart  
- Screenshot: **[`line_diagram.png`](./line_diagram.png)**

Typical fields:
- Axis: `METRIC_DATE`
- Values: `REQUESTS_COUNT` (Sum)

### Forecast line chart
- **[`forecast_line_diagram.pbix`](./forecast_line_diagram.pbix)** — forecast visualization  
- Screenshot: **[`forecast_line_diagram.png`](./forecast_line_diagram.png)**

Forecast results are generated by:
- [`../sql/05_forecast_daily_requests.sql`](../sql/05_forecast_daily_requests.sql)

Forecast evaluation (optional, for model quality):
- [`../sql/07_forecast_evaluation.sql`](../sql/07_forecast_evaluation.sql)

---

## Screenshots (quick preview)

- Map: [`map.png`](./map.png)  
- Line chart: [`line_diagram.png`](./line_diagram.png)  
- Forecast: [`forecast_line_diagram.png`](./forecast_line_diagram.png)

---

## Notes
- If you share `.pbix` publicly: avoid storing credentials inside the file.
- Recommended Snowflake connection uses the curated PRES view instead of raw tables.
